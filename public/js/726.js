(self.webpackChunk=self.webpackChunk||[]).push([[726],{6726:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>q});var o=a(5166),l={class:"container-fluid p-0"},s=(0,o.createVNode)("h1",{class:"h3 mb-3"},"Roles and Abilities",-1),d={class:"row"},c={class:"col-12"},r={class:"card"},i=(0,o.createVNode)("div",{class:"card-header"}," Roles Data Table ",-1),n={class:"card-body"},u={class:"row"},b={class:"col-12 mb-3"},m=(0,o.createVNode)("div",{class:"col-12 mb-3"},[(0,o.createVNode)("table",{id:"roles-table",class:"table table-hover",style:{width:"100%"}})],-1),h={id:"role-add-modal",class:"modal fade",tabindex:"-1"},v={class:"modal-dialog modal-sm"},f={class:"modal-content"},p=(0,o.createVNode)("div",{class:"modal-header"},[(0,o.createVNode)("h5",{class:"modal-title"},"Add Role Modal"),(0,o.createVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),V={class:"modal-body"},N={class:"d-flex flex-column"},w=(0,o.createVNode)("label",null,"Role Name",-1),y={class:"modal-footer"},k=(0,o.createVNode)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),_={id:"role-edit-modal",class:"modal fade",tabindex:"-1"},x={class:"modal-dialog"},C={class:"modal-content"},R=(0,o.createVNode)("div",{class:"modal-header"},[(0,o.createVNode)("h5",{class:"modal-title"},"Edit Role Modal"),(0,o.createVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),g={class:"modal-body"},M={class:"d-flex flex-column"},D=(0,o.createVNode)("label",null,"Role Name",-1),A=(0,o.createVNode)("h5",{class:"my-2"},"Manage Users",-1),U={class:"d-flex flex-fill"},S={class:"form-check form-switch me-3"},T=(0,o.createVNode)("label",{class:"form-check-label"},"manage-users",-1),O={class:"form-check form-switch me-3"},B=(0,o.createVNode)("label",{class:"form-check-label"},"users",-1),E={class:"form-check form-switch me-3"},I=(0,o.createVNode)("label",{class:"form-check-label"},"roles",-1),K={class:"modal-footer"},j=(0,o.createVNode)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);const P={props:{data:Object},data:function(){return{role_edit_modal:null,role_add_modal:null,role_name:"",myToast:null,overview:{}}},methods:{showAddModal:function(){this.role_add_modal.show(),this.role_name=""},saveRole:function(){var e=this;e.role_add_modal.hide(),axios.post(this.$props.data.roles_store_link,{role_name:this.role_name}).then((function(t){alertify.success('<label class="text-white">Success!</label>'),e.dt.draw()})).catch((function(e){console.log(e.response.data.errors);var t=e.response.data.errors,a="";$.each(t,(function(e,t){$.each(t,(function(e,t){a+=t+"\n"}))})),alertify.alert(a,(function(){alertify.message("OK")}))}))},editRole:function(){var e=this;e.role_add_modal.hide(),axios.post(this.$props.data.roles_update_link,this.overview).then((function(t){alertify.success('<label class="text-white">Success!</label>'),e.dt.draw()})).catch((function(e){console.log(e.response.data.errors);var t=e.response.data.errors,a="";$.each(t,(function(e,t){$.each(t,(function(e,t){a+=t+"\n"}))})),alertify.alert(a,(function(){alertify.message("OK")}))}))},deleteRole:function(){var e=this;e.role_edit_modal.hide(),axios.post(this.$props.data.roles_delete_link,this.overview).then((function(t){alertify.success('<label class="text-white">Success!</label>'),e.dt.draw()})).catch((function(e){console.log(e.response.data.errors);var t=e.response.data.errors,a="";$.each(t,(function(e,t){$.each(t,(function(e,t){a+=t+"\n"}))})),alertify.alert(a,(function(){alertify.message("OK")}))}))}},mounted:function(){var e=this;this.role_add_modal=new bootstrap.Modal(document.getElementById("role-add-modal"),{keyboard:!1}),this.role_edit_modal=new bootstrap.Modal(document.getElementById("role-edit-modal"),{keyboard:!1}),this.dt=$("#roles-table").DataTable({serverSide:!0,ajax:{url:e.data.roles_table_link,type:"POST"},order:[[0,"desc"]],columns:[{data:"id",title:"ID"},{data:function(e){return"<button class='btn btn-link'>"+e.name+"</button>"},title:"Name"},{data:"created_at",title:"Created At"},{data:"updated_at",title:"Created At"}],drawCallback:function(t){$("#roles-table tr button").on("click",(function(){e.overview=e.dt.row($(this).parent().parent()).data(),e.role_edit_modal.show()}))}})},render:function(e,t,a,$,P,q){return(0,o.openBlock)(),(0,o.createBlock)("div",null,[(0,o.createVNode)("div",l,[s,(0,o.createVNode)("div",d,[(0,o.createVNode)("div",c,[(0,o.createVNode)("div",r,[i,(0,o.createVNode)("div",n,[(0,o.createVNode)("div",u,[(0,o.createVNode)("div",b,[(0,o.createVNode)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=function(e){return q.showAddModal()})},"Add a Role")]),m])])])])])]),(0,o.createVNode)("div",h,[(0,o.createVNode)("div",v,[(0,o.createVNode)("div",f,[p,(0,o.createVNode)("div",V,[(0,o.createVNode)("div",N,[w,(0,o.withDirectives)((0,o.createVNode)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(e){return P.role_name=e})},null,512),[[o.vModelText,P.role_name]])])]),(0,o.createVNode)("div",y,[k,(0,o.createVNode)("button",{type:"button",class:"btn btn-success text-white",onClick:t[3]||(t[3]=function(){return q.saveRole&&q.saveRole.apply(q,arguments)})},"Save changes")])])])]),(0,o.createVNode)("div",_,[(0,o.createVNode)("div",x,[(0,o.createVNode)("div",C,[R,(0,o.createVNode)("div",g,[(0,o.createVNode)("div",M,[D,(0,o.withDirectives)((0,o.createVNode)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=function(e){return P.overview.name=e})},null,512),[[o.vModelText,P.overview.name]])]),A,(0,o.createVNode)("div",U,[(0,o.createVNode)("div",S,[(0,o.withDirectives)((0,o.createVNode)("input",{class:"form-check-input",type:"checkbox",value:"manage-users","onUpdate:modelValue":t[5]||(t[5]=function(e){return P.overview.abilities=e})},null,512),[[o.vModelCheckbox,P.overview.abilities]]),T]),(0,o.createVNode)("div",O,[(0,o.withDirectives)((0,o.createVNode)("input",{class:"form-check-input",type:"checkbox",value:"users","onUpdate:modelValue":t[6]||(t[6]=function(e){return P.overview.abilities=e})},null,512),[[o.vModelCheckbox,P.overview.abilities]]),B]),(0,o.createVNode)("div",E,[(0,o.withDirectives)((0,o.createVNode)("input",{class:"form-check-input",type:"checkbox",value:"roles","onUpdate:modelValue":t[7]||(t[7]=function(e){return P.overview.abilities=e})},null,512),[[o.vModelCheckbox,P.overview.abilities]]),I])])]),(0,o.createVNode)("div",K,[j,(0,o.createVNode)("button",{type:"button",class:"btn btn-danger text-white",onClick:t[8]||(t[8]=function(){return q.deleteRole&&q.deleteRole.apply(q,arguments)})},"Delete"),(0,o.createVNode)("button",{type:"button",class:"btn btn-info text-white",onClick:t[9]||(t[9]=function(){return q.editRole&&q.editRole.apply(q,arguments)})},"Update")])])])])])}},q=P}}]);
//# sourceMappingURL=726.js.map?id=1d7d80649fac833e276f